<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/reset.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/animate.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css" media="screen" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="highlight/styles/zenburn.css">
    <script src="highlight/highlight.pack.js"></script>
    <title>Get started - Suki</title>
  </head>

  <body>
    <header>
      <div class="doc">
        <p class="back"><a href="index.html">&lt; Back</a></p>
        <h1>Get started</h1>
        <h2>Build a RESTful API within 2 minutes</h2>
        <hr>
        <p>In this tutorial, we will explain how to create a simple application that provides a RESTful API using the Suki framework.</p>
        <h3>0. Defining the API</h3>
        <p>We will build an API to manage books. The API consists of the following methods:</p>
        <div class="content">
          <table>
            <thead>
              <tr>
                <th>Method</th>
                <th>URL</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>GET</td>
                <td>/books</td>
                <td>Retrieves all books</td>
              </tr>
              <tr>
                <td>POST</td>
                <td>/books</td>
                <td>Create a new book</td>
              </tr>
              <tr>
                <td>GET</td>
                <td>/books/:bookId</td>
                <td>Retrieves a specific book</td>
              </tr>
              <tr>
                <td>PUT</td>
                <td>/books/:bookId</td>
                <td>Updates a specific book</td>
              </tr>
              <tr>
                <td>DELETE</td>
                <td>/books/:bookId</td>
                <td>Deletes a specific book</td>
              </tr>
          </table>
        </div>
        <h3>1. Install Suki</h3>
        <p>Suki is bundled with an executable. If you install suki globally with npm you'll have it available from anywhere on your machine:</p>
        <pre><code>$ npm install -g suki</code></pre>
        <h3>2. Create a application</h3>
        <p>A good beginning is half done. Suki can create a template application for you:</p>
        <pre><code>$ suki new book</code></pre>
        <p>Where <code class="inline">book</code> is the name of your application.</p>
        <p>After execute the command, Suki will create a directory named "book" in the current path.</p>
        <h3>3. Define the model</h3>
        <p>Suki follows the MVC pattern and use the <a href="http://sequelizejs.com">Sequelize</a> library as the model layer.</p>
        <p>Now let's define the book model. We can create the book model using the following command:</p>
        <pre><code>$ suki generate model book</code></pre>
        <pre><code>module.exports = class extends Suki.SequelizeModel

  @_define: (DataTypes) ->
    title: DataTypes.STRING
    price: DataTypes.INTEGER
        </code></pre>
        <h3>4. Define the controller</h3>
        <pre><code>$ suki create-controller task</code></pre>
        <pre><code>module.exports = class extends Suki.Controller

  # GET /books
  index: (Book) ->
    @res.json Book.findAll()

  # POST /books
  create: (Book) ->
    @res.json Book.create
      title: @req.body.title
      price: @req.body.price

  # GET /books/:bookId
  show: ->
    @res.json @book

  # PUT /books/:id
  update: ->
    @book.title = req.body.title
    @book.price = req.body.price
    @res.json @book.save()

  # DELETE /books/:id
  destroy: ->
    @book.destroy()
    @res.json { "message": "deleted" }

        </code></pre>
      </div>
    </header>
    <a href="https://github.com/luin/Suki"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>
    <script src="javascripts/jquery.js"></script>
    <script src="javascripts/main.js"></script>
  </body>
</html>

